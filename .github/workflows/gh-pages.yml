name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Prepare publish directory
        run: |
          # Create a clean directory for files to publish. Adjust the list below to include any other static files/folders you want published.
          rm -rf publish || true
          mkdir -p publish
          # Copy visible static site files
          cp -r index.html CSS JS README.md publish/ 2>/dev/null || true
          # Copy root-level assets if present (favicon, assets folder, etc.)
          cp -r assets publish/ 2>/dev/null || true

      # If you have a build step (npm/yarn) run it here and copy the build output into publish/

      - name: Deploy to gh-pages
        uses: peaceiris/actions-gh-pages@v4
        with:
          # The action will use a personal access token (GH_PAGES_PAT) if you add it to repo Secrets.
          # If you don't provide GH_PAGES_PAT, the action falls back to GITHUB_TOKEN which may be
          # restricted from pushing to the repository if GitHub's workflow permissions are set to
          # read-only or branch protection prevents the `github-actions` bot from pushing. If you
          # see "Permission ... denied to github-actions[bot]" and a 403, add a PAT with `repo`
          # (and `workflow` if needed) scopes and save it as the repo secret `GH_PAGES_PAT`.
          personal_token: ${{ secrets.GH_PAGES_PAT }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./publish
          publish_branch: gh-pages
          # prevent keeping history from previous gh-pages (optional)
          keep_files: false

